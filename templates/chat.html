<ion-view>
    <ion-nav-title class="sergy-title">
        <h5><i class="ion-record small online" ng-show="online"></i><i class="ion-record small offline"></i> Sergy</h5>
        <p>
            <span>OFFLINE - 1h 22m ago</span>
            <span ng-show="online">ONLINE</span>
        </p>
    </ion-nav-title>

    <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon icon ion-ios7-drag"></button>
    </ion-nav-buttons>

    <ion-nav-buttons side="right">
        <i class="icon1 i-order"></i>
    </ion-nav-buttons>

    <ion-content class="has-header padding">
        <!--        <chat></chat>-->
        <ol class="messages" ng-repeat="message in allchats">
            <li class="{{message.name|chatclass}}" ng-if="message.type!=3 && message.type!=4">
                <p>
                    {{message.text}}
                    <br><span class="datetime">{{message.timestamp|date:"h:mma"}}</span>
                </p>
            </li>
            
<!--            li for form-->
            <li class="{{message.name|chatclass}}" ng-if="message.type==3">
                <p ng-init="formm = convertform(message.text);">

                    <!--                    {{formjson|json}}-->
                   <span class="form-title">{{formm.name}}</span>
                    <span class="assertive inform button-assertive">{{msg}}</span>
                    <span ng-repeat="form in formm.json">
<!--                    {{message.name}} : -->
                        
                    <input type="text" placeholder='{{form.placeholder}}' ng-model="form.val" class="form-control inform" ng-if="form.type=='text'">
                        <input type="password" placeholder='{{form.placeholder}}' ng-model="form.val"  class="form-control inform" ng-if="form.type=='password'">
                        <label class="item item-input item-select" ng-if="form.type=='selection'">
    
    <select  ng-model="form.val" class="form-control inform" >
                            <option>{{form.placeholder}}</option>
                            <option ng-repeat="frm in form.value">{{frm.title}}</option>
                        </select>
  </label>

                        
                    <br>
                    </span>
                    <button class="button button-block button-positive button-small button-outline" ng-click="submitt(formm,message)">Submit</button>
                    <span class="small-right">{{message.timestamp|converttime}}</span>
                </p>
            </li>
            
<!--            li for product-->
            <li class="{{message.name|chatclass}}" ng-if="message.type==4">
                <p ng-init="form=convertproduct(message.text);">

                   <span class="form-title">{{form.name}}</span>
                   <span>
                       <img src="{{form.image|imagepath}}" width="100">
                   </span>
                    <span class="form-info">Price</span>
                    <span>{{form.price}}</span>
                    <span class="form-info">Details</span>
                    <span>{{form.details}}</span>
                    <button class="button button-block button-positive button-small button-outline" ng-click="placeorder(form)">Place Order</button>
                    <span class="small-right">{{message.timestamp|converttime}}</span>
                </p>
            </li>

        </ol>
    </ion-content>
    <ion-footer-bar class="bar-stable bar-white chat-bar">
        <form ng-submit="send(chat);">

            <table style="width:100%;">
                <tr>
                    <td style="width:100%;">
                        <input type="text" ng-model="chat.message" placeholder="Your message" style="width:100%;">
                    </td>
                    <td>
                        <input type="submit" value="SEND">
                    </td>
                </tr>
            </table>

        </form>
    </ion-footer-bar>

    </ion-content>
</ion-view>
